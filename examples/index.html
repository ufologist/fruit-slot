<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <title>经典水果机(格子)抽奖 JS 组件示例</title>
    <!-- 示例样式 -->
    <style>
    .clearfix:before,
    .clearfix:after {
        display: table;
        content: " ";
    }
    .clearfix:after {
        clear: both;
    }

    .lotto__list {
        position: relative;
        width: 592px;
        margin-left: auto;
        margin-right: auto;
    }
    .lotto__item,
    .lotto__placeholder {
        position: relative;
        float: left; /* https://css-tricks.com/fighting-the-space-between-inline-block-elements/ */
        text-align: center;
    }
    .lotto__placeholder {
        width: 296px;
        height: 102px;
    }
    .lotto__img {
        width: 148px;
        height: 102px;
        vertical-align: middle;
    }
    .lotto__txt {
        position: absolute;
        right: 0;
        bottom: 0;
        left: 0;
        line-height: 24px;
        font-size: 14px;
        color: #fff;
        background-color: #515151;
    }
    .lotto__border {
        display: none;
        position: absolute;
        z-index: 1;
        left: -3px;
        top: -3px;
        width: 148px;
        height: 102px;
        border: 3px solid #FE2441;
    }
    .lotto__item--hover .lotto__border {
        display: block;
    }
    .btn-start {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 40%;
        height: 40%;
        font-size: 120%;
        -webkit-transform: translate(-50%, -50%);
                transform: translate(-50%, -50%);
    }
    </style>
</head>
<body>
    <h1>经典水果机(格子)抽奖 JS 组件示例 <small><a target="_blank" href="https://github.com/ufologist/fruit-slot">fruit-slot</a></small> </h1>
    <p>组件没有依赖任何样式, 可自由发挥, 示例仅提供了最基础的样式结构以供参考</p>
    <p>以下示例仅布局不一样, 调用方式都是一样的</p>
    <h2>12宫格</h2>
    <div id="J_lottery1">
        <div class="lotto__list clearfix">
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">0</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">1</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">2</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/TKS/" alt="谢谢参与" >
                <em class="lotto__txt">3</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/4Y/" alt="4Y币" >
                <em class="lotto__txt">11</em>
                <div class="lotto__border"></div>
            </span>
            <div class="lotto__placeholder"></div>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/5Y/" alt="5Y币" >
                <em class="lotto__txt">4</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/6Y/" alt="6Y币" >
                <em class="lotto__txt">10</em>
                <div class="lotto__border"></div>
            </span>
            <div class="lotto__placeholder"></div>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/7Y/" alt="7Y币" >
                <em class="lotto__txt">5</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/TKS/" alt="谢谢参与" >
                <em class="lotto__txt">9</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/8Y/" alt="8Y币" >
                <em class="lotto__txt">8</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/9Y/" alt="9Y币" >
                <em class="lotto__txt">7</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/10Y/" alt="10Y币" >
                <em class="lotto__txt">6</em>
                <div class="lotto__border"></div>
            </span>
            <button class="btn-start">START</button>
        </div>
    </div>

    <h2>9宫格</h2>
    <style>
    #J_lottery2 .lotto__list {
        width: 444px;
    }
    #J_lottery2 .lotto__placeholder {
        width: 148px;
    }
    #J_lottery2 .btn-start {
        width: 25%;
        height: 25%;
    }
    </style>
    <div id="J_lottery2">
        <div class="lotto__list clearfix">
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">0</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">1</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">2</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/4Y/" alt="4Y币" >
                <em class="lotto__txt">7</em>
                <div class="lotto__border"></div>
            </span>
            <div class="lotto__placeholder"></div>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">3</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">6</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/TKS/" alt="谢谢参与" >
                <em class="lotto__txt">5</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">4</em>
                <div class="lotto__border"></div>
            </span>
            <button class="btn-start">START</button>
        </div>
    </div>

    <h2>横排抽奖</h2>
    <style>
    #J_lottery3 .btn-start {
        left: 115%;
        width: 25%;
        height: 100%;
    }
    </style>
    <div id="J_lottery3">
        <div class="lotto__list clearfix">
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">0</em>
                <div class="lotto__border"></div>
            </div>
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">1</em>
                <div class="lotto__border"></div>
            </div>
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">2</em>
                <div class="lotto__border"></div>
            </div>
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/TKS/" alt="谢谢参与" >
                <em class="lotto__txt">3</em>
                <div class="lotto__border"></div>
            </div>
            <button class="btn-start">START</button>
        </div>
    </div>

    <h2>竖排抽奖</h2>
    <style>
    #J_lottery4 .lotto__list {
        width: 148px;
    }
    #J_lottery4 .lotto__item {
        float: none;
    }
    #J_lottery4 .btn-start {
        left: 160%;
        width: 100%;
        height: 25%;
    }
    </style>
    <div id="J_lottery4">
        <div class="lotto__list clearfix">
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">0</em>
                <div class="lotto__border"></div>
            </div>
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">1</em>
                <div class="lotto__border"></div>
            </div>
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">2</em>
                <div class="lotto__border"></div>
            </div>
            <div data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/TKS/" alt="谢谢参与" >
                <em class="lotto__txt">3</em>
                <div class="lotto__border"></div>
            </div>
            <button class="btn-start">START</button>
        </div>
    </div>

    <h2>逆时针9宫格(自定义抽奖动画顺序)</h2>
    <style>
    #J_lottery5 .lotto__list {
        width: 444px;
    }
    #J_lottery5 .lotto__placeholder {
        width: 148px;
    }
    #J_lottery5 .btn-start {
        width: 25%;
        height: 25%;
    }
    </style>
    <div id="J_lottery5">
        <div class="lotto__list clearfix">
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">0</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">7</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">6</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/4Y/" alt="4Y币" >
                <em class="lotto__txt">1</em>
                <div class="lotto__border"></div>
            </span>
            <div class="lotto__placeholder"></div>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/1Y/" alt="1Y币" >
                <em class="lotto__txt">5</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/2Y/" alt="2Y币" >
                <em class="lotto__txt">2</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/TKS/" alt="谢谢参与" >
                <em class="lotto__txt">3</em>
                <div class="lotto__border"></div>
            </span>
            <span data-lotto-item class="lotto__item">
                <img class="lotto__img" src="//lorempixel.com/148/102/sports/3Y/" alt="3Y币" >
                <em class="lotto__txt">4</em>
                <div class="lotto__border"></div>
            </span>
            <button class="btn-start">START</button>
        </div>
    </div>

    <script src="//cdn.jsdelivr.net/gh/ufologist/lottery@master/src/fruit-slot.js"></script>
    <script>
    function createFruitSlot(selector) {
        var fruitSlot = new FruitSlot({
            el: selector,
            lottoItem: '[data-lotto-item]',
            activeClass: 'lotto__item--hover'
        });

        var lottoItemLength = document.querySelector(selector).querySelectorAll('[data-lotto-item]').length;

        document.querySelector(selector).querySelector('.btn-start').addEventListener('click', function(event) {
            fruitSlot.start();

            // 假装我们异步请求接口数据获取抽奖结果
            setTimeout(function() {
                var stopIndex = Math.floor(Math.random() * lottoItemLength);
                fruitSlot.stop(stopIndex, function() {
                    console.log('抽奖结果', selector, stopIndex);
                });
            }, 2000);
        }, false);
    }

    function createFruitSlotCustomElements() {
        var selector = '#J_lottery5';
        var lottoItems = document.querySelector(selector).querySelectorAll('[data-lotto-item]');
        var lottoItemLength = lottoItems.length;
        // 完全自由定制元素顺序
        var lottoArr = [
            lottoItems[0],
            lottoItems[3],
            lottoItems[5],
            lottoItems[6],
            lottoItems[7],
            lottoItems[4],
            lottoItems[2],
            lottoItems[1]
        ];
        // 因此你可以玩出很多花样, 例如乱序抽奖, S型什么的都不是问题
        // var lottoArr = [
        //     lottoItems[0],
        //     lottoItems[2],
        //     lottoItems[5],
        //     lottoItems[3],
        //     lottoItems[6],
        //     lottoItems[4],
        //     lottoItems[7],
        //     lottoItems[1]
        // ];

        var fruitSlot = new FruitSlot({
            el: selector,
            lottoItem: '[data-lotto-item]',
            activeClass: 'lotto__item--hover',
            lottoArr: lottoArr
        });

        document.querySelector(selector).querySelector('.btn-start').addEventListener('click', function(event) {
            fruitSlot.start();

            // 假装我们异步请求接口数据获取抽奖结果
            setTimeout(function() {
                var stopIndex = Math.floor(Math.random() * lottoItemLength);
                fruitSlot.stop(stopIndex, function() {
                    console.log('抽奖结果', selector, stopIndex);
                });
            }, 2000);
        }, false);
    }

    createFruitSlot('#J_lottery1');
    createFruitSlot('#J_lottery2');
    createFruitSlot('#J_lottery3');
    createFruitSlot('#J_lottery4');
    createFruitSlotCustomElements();
    </script>
</body>
</html>
